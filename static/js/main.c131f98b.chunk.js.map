{"version":3,"sources":["models/Pokemon.ts","models/unknown-pokemon.png","models/utilities.ts","hooks/useCachedQuery.ts","components/PokemonImage.tsx","components/PokemonTypes.tsx","components/PokemonDetails.tsx","components/PokemonNavigation.tsx","App.tsx","index.tsx"],"names":["capitalize","original","toUpperCase","slice","getPokemonName","match","name","suffix","getUnknownPokemon","pokemon","error","UnknownPokemonPNG","sprites","cache","usePokemonQuery","url","useState","result","setResult","query","setError","loading","setLoading","useEffect","canceler","cached","token","axios","CancelToken","c","get","cancelToken","then","response","data","isCancel","useQ","id","nameId","front_default","back_default","types","sort","a","b","Math","sign","slot","map","type","getPokemon","noop","PokemonImage","flipped","setFlipped","loaded","setLoaded","onLoad","useCallback","toggleFlipped","front","back","sprite","isNotFound","onClick","className","title","hidden","src","alt","PokemonTypes","PokemonType","PokemonDetails","selected","unselect","PokemonDetailsView","stateClassNames","push","join","PokemonDetailsHeader","children","PokemonMistryImage","onError","getMisteryPokemonSprite","PokemonEntry","reference","getPokemonIdFromURL","lastIndexOf","length","PokemonNavigation","setSelected","pokemons","setPokemons","useInfiniteQuery","page","pageParam","results","getNextPageParam","last","all","isFetchingNextPage","hasNextPage","fetchNextPage","status","pages","flat","useInfinitePokemonQuery","done","fetch","parentRef","useRef","useVirtual","size","estimateSize","virtualItems","totalSize","canFetchNextPage","isLastPokemonOnScreen","index","ref","style","height","row","isOverflow","isLoadingRow","tabIndex","measureRef","transform","start","App","AppHeader","AppFooter","target","rel","href","client","QueryClient","ReactDOM","render","StrictMode","QueryClientProvider","document","getElementById","location","protocol","host","startsWith","replace"],"mappings":"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","file":"static/js/main.c131f98b.chunk.js","sourcesContent":["import { PokemonResponse } from \"./PokeAPI\";\n\nexport default interface Pokemon {\n  id: string;\n  nameId: string;\n  name: string;\n  sprites: [front: string | null, back: string | null];\n  types: string[];\n}\n\nfunction capitalize(original: string): string {\n  return original[0].toUpperCase() + original.slice(1);\n}\n\nexport function getPokemonName(original: string) {\n  original = capitalize(original);\n\n  // This was overkill\n\n  const match = original.match(/([a-z]+)-([-a-z]+)$/i);\n\n  if (match) {\n    const name = match[1];\n    const suffix = match[2];\n    switch (suffix) {\n      // Replacements\n      case \"f\":\n      case \"female\":\n        return `Female ${name}`;\n      case \"m\":\n      case \"male\":\n        return `Male ${name}`;\n      case \"jr\":\n        return `${name} Junior`;\n      case \"mime\":\n      case \"rime\":\n        // As second word\n        return `${name} ${suffix}`; // Mr mime, Mr rime\n      case \"red-meteor\":\n        return `Red meteor ${name}`;\n      case \"red-striped\":\n        return `Red striped ${name}`;\n      case \"single-strike\":\n        return `Single strike ${name}`;\n      case \"rapid-strike\":\n        return `Rapid strike ${name}`;\n      case \"oh\":\n      case \"o\":\n      case \"fini\":\n      case \"koko\":\n      case \"bulu\":\n      case \"lele\":\n        // As suffix with a hyphen\n        return `${name}-${suffix}`; // Ho-oh\n      case \"amped-gmax\":\n        return `Amped gmax ${name}`;\n      case \"low-key\":\n        return `Low key ${name}`;\n      case \"low-key-gmax\":\n        return `Low key gmax ${name}`;\n      case \"single-strike-gmax\":\n        return `Single strike gmax ${name}`;\n      case \"rapid-strike-gmax\":\n        return `Rapid strike gmax ${name}`;\n      case \"normal\":\n      case \"crowned\":\n      case \"totem\":\n      case \"totem-busted\":\n      case \"original\":\n      case \"amped\":\n      case \"ordinary\":\n      case \"average\":\n      case \"standard\":\n      case \"disguised\":\n      case \"altered\":\n      case \"eternal\":\n      case \"primal\":\n      case \"core\":\n      case \"small\":\n      case \"large\":\n      case \"hero\":\n      case \"galar\":\n      case \"mega\":\n      case \"gmax\":\n      case \"super\":\n      case \"eternamax\":\n        // As prefix adjective\n        return `${capitalize(suffix)} ${name}`;\n      case \"mega-x\":\n        return `Mega X ${name}`;\n      case \"mega-y\":\n        return `Mega Y ${name}`;\n      case \"incarnate\":\n        // As postfix adjective\n        return `${name} ${suffix}`;\n      case \"null\":\n        return \"Type: Null\";\n      default:\n        if (name === \"Porygon\") {\n          return name + \" \" + suffix.toUpperCase();\n        } else if (name === \"Oricorio\") {\n          return `${name} (${capitalize(suffix)} style)`;\n        } else {\n          return `${name} (${capitalize(suffix)} form)`;\n        }\n    }\n  }\n  return original;\n}\n\nexport function getPokemon(response: PokemonResponse): Pokemon {\n  const name = response.name;\n  return {\n    id: response.id,\n    nameId: name,\n    name: getPokemonName(name),\n    sprites: [\n      response.sprites.front_default,\n      response.sprites.back_default,\n    ],\n    types: response.types\n      .sort((a, b) => Math.sign(b.slot - a.slot))\n      .map(type => type.type.name),\n  };\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJUExURQAAAP///wAAAHPGg3EAAAADdFJOU///ANfKDUEAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACoSURBVGhD7dJLCoRAEATRmb7/oedXIrOKyoYChYiNrYt8iD7WcAKYACaACWACmAAmgAlgApgAlgDPqm57tYEa/1XPOnWBWj6qp40S4DwFQh+ow7tIaAN1/TYB/CWATQPJ/g7w2Z8Esv0cCPdjIN1PgXg/BPL9DaCO3SJg4wVyoI7tBLBrfeSdBLCLAbf/Te8PjH+DnQQwAUwAE8AEMAFMABPABDABaK0XovlHYv9vwRMAAAAASUVORK5CYII=\"","import axios from \"axios\";\n\nimport { useEffect, useState } from \"react\";\nimport { useInfiniteQuery } from \"react-query\";\n\nimport useQ from \"../hooks/useCachedQuery\";\n\nimport {\n  PokemonResponse,\n  PokemonsResponse,\n  ResponseReference,\n} from \"./PokeAPI\";\n\nimport Pokemon, { getPokemon } from \"./Pokemon\";\n\nimport UnknownPokemonPNG from \"./unknown-pokemon.png\";\n\nexport { UnknownPokemonPNG };\n\nexport function getUnknownPokemon(pokemon: Pokemon, error: boolean) {\n  if (error) return UnknownPokemonPNG;\n  return pokemon.sprites[1] || pokemon.sprites[0] || UnknownPokemonPNG;\n}\n\nexport function getGenerationRomanNumeral(generationId: string) {\n  return generationId.slice(11).toUpperCase();\n}\n\nexport const GenerationHumanizedText: Record<string, string> = {\n  \"generation-i\": \"first generation\",\n  \"generation-ii\": \"second generation\",\n  \"generation-iii\": \"third generation\",\n  \"generation-iv\": \"fourth generation\",\n  \"generation-v\": \"fifth generation\",\n  \"generation-vi\": \"sixth generation\",\n  \"generation-vii\": \"seventh generation\",\n  \"generation-viii\": \"eighth generation\",\n};\n\nconst cache = {};\n\nexport function usePokemonQuery(url: string) {\n  const [result, setResult] = useState<Pokemon | null>(null);\n\n  const [response, error, loading] = useQ<PokemonResponse>(cache, url);\n\n  useEffect(() => {\n    if (response) {\n      setResult(getPokemon(response));\n    }\n  }, [response]);\n\n  return [result, error, loading] as const;\n}\n\nconst backend = \"https://pokeapi.co/api/v2/pokemon/\";\nconst stride = 50;\n\nfunction getPokemons(page: number) {\n  return `${backend}?limit=${stride}&offset=${stride * page}`;\n}\n\nexport function useInfinitePokemonQuery() {\n  const [pokemons, setPokemons] = useState<ResponseReference[]>([]);\n\n  const {\n    isFetchingNextPage,\n    hasNextPage,\n    fetchNextPage,\n    status,\n    error,\n    data,\n  } = useInfiniteQuery(\n    \"pokemons\",\n    async ({ pageParam = 0 }) => {\n      const url = getPokemons(pageParam);\n\n      const result = await axios.get<PokemonsResponse>(url);\n\n      return result.data.results;\n    },\n    {\n      getNextPageParam(last, all) {\n        return last.length ? all.length : false;\n      },\n    }\n  );\n\n  useEffect(() => {\n    if (!data) return;\n    setPokemons(data.pages.flat(1));\n  }, [data]);\n\n  return [\n    pokemons,\n    !hasNextPage,\n    fetchNextPage,\n    isFetchingNextPage,\n    error,\n    status,\n  ] as const;\n}\n\nexport function noop() {}\n","import { useEffect, useState } from \"react\";\n\nimport axios, { Canceler } from \"axios\";\n\nexport type QueryResult<T> = readonly [\n  result: T | null,\n  error: string,\n  loading: boolean\n];\n\nexport default function useQuery<T>(\n  cache: Record<string, T>,\n  query: string\n): QueryResult<T> {\n  const [result, setResult] = useState<T | null>(null);\n  const [error, setError] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const cached = cache[query];\n\n    if (cached) {\n      setResult(cached);\n      setError(\"\");\n      setLoading(false);\n      return;\n    }\n\n    let canceler: Canceler;\n\n    const token = new axios.CancelToken(c => (canceler = c));\n\n    setLoading(true);\n\n    axios\n      .get<T>(query, { cancelToken: token })\n      .then(\n        response => {\n          const result = response.data;\n          cache[query] = result;\n          setResult(result);\n          setLoading(false);\n        },\n        error => {\n          if (axios.isCancel(error)) return;\n          setError(error);\n          setLoading(false);\n        }\n      );\n\n    return () => canceler();\n  }, [cache, query]);\n\n  return [result, error, loading];\n}\n","import { useCallback, useEffect, useState } from \"react\";\nimport { UnknownPokemonPNG } from \"../models/utilities\";\n\nexport default function PokemonImage({\n  name,\n  sprites,\n}: {\n  name: string;\n  sprites: [string | null, string | null];\n}) {\n  const [flipped, setFlipped] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n\n  const onLoad = useCallback(() => {\n    setLoaded(true);\n  }, []);\n\n  useEffect(() => {\n    setFlipped(false);\n    setLoaded(false);\n  }, [name]);\n\n  const toggleFlipped = useCallback(() => {\n    setFlipped(!flipped);\n    setLoaded(false);\n  }, [flipped]);\n\n  const front = sprites[0] || UnknownPokemonPNG;\n  const back = sprites[1] || UnknownPokemonPNG;\n\n  const sprite = flipped ? back : front;\n\n  const isNotFound = sprite === UnknownPokemonPNG;\n\n  return (\n    <figure\n      onClick={toggleFlipped}\n      className=\"pokemon-image\"\n      title=\"Click to flip\"\n    >\n      {loaded || (\n        <div className=\"loading\">\n          <i className=\"gg-spinner\" />\n        </div>\n      )}\n      <img\n        hidden={!loaded}\n        onLoad={onLoad}\n        src={sprite}\n        alt={`${flipped ? \"Back\" : \"Front\"} view of ${name}.`}\n      />\n      <figcaption>\n        {isNotFound\n          ? `No ${name} ${flipped ? \"back\" : \"front\"} view was found.`\n          : `${flipped ? \"Back\" : \"Front\"} view of ${name}.`}\n      </figcaption>\n    </figure>\n  );\n}\n","export default function PokemonTypes({ types }: { types: string[] }) {\n  return (\n    <div className=\"pokemon-types\">\n      {types.map(type => (\n        <PokemonType key={type} type={type} />\n      ))}\n    </div>\n  );\n}\n\nfunction PokemonType({ type }: { type: string }) {\n  return (\n    <div className={`pokemon-type pokemon-type-${type}`}>\n      {type.toUpperCase()}\n    </div>\n  );\n}\n","import { PropsWithChildren } from \"react\";\n\nimport { ResponseReference } from \"../models/PokeAPI\";\nimport { getPokemonName } from \"../models/Pokemon\";\nimport { usePokemonQuery } from \"../models/utilities\";\nimport PokemonImage from \"./PokemonImage\";\nimport PokemonTypes from \"./PokemonTypes\";\n\ntype PokemonUnselect = {\n  unselect(): void;\n};\n\ntype PokemonSelected = {\n  selected: ResponseReference;\n};\n\ntype PokemonNullableSelected = {\n  selected: ResponseReference | null;\n};\n\nexport type PokemonDetailsProps = PokemonNullableSelected &\n  PokemonUnselect;\n\nexport default function PokemonDetails({\n  selected,\n  unselect,\n}: PokemonDetailsProps) {\n  return (\n    <>\n      {selected ? (\n        <PokemonDetailsView selected={selected} unselect={unselect} />\n      ) : (\n        <article className=\"pokemon-details closed\">\n          Select a pokemon from the right panel.\n        </article>\n      )}\n    </>\n  );\n}\nexport type PokemonDetailsViewProps = PokemonSelected & PokemonUnselect;\n\nfunction PokemonDetailsView({\n  selected,\n  unselect,\n}: PokemonDetailsViewProps) {\n  const [pokemon, error, loading] = usePokemonQuery(selected.url);\n\n  const stateClassNames: string[] = [];\n\n  loading && stateClassNames.push(\"loading\");\n  error && stateClassNames.push(\"error\");\n\n  return (\n    <article\n      className={`pokemon-details open ${stateClassNames.join(\" \")}`}\n    >\n      {pokemon ? (\n        <>\n          <PokemonDetailsHeader unselect={unselect}>\n            {pokemon.name}\n            <code>#{pokemon.id}</code>\n          </PokemonDetailsHeader>\n          <main>\n            <PokemonImage name={pokemon.name} sprites={pokemon.sprites} />\n            <PokemonTypes types={pokemon.types} />\n          </main>\n        </>\n      ) : loading ? (\n        <i className=\"gg-spinner\" />\n      ) : (\n        <>\n          <PokemonDetailsHeader unselect={unselect}>\n            Error loading data {getPokemonName(selected.name)}\n          </PokemonDetailsHeader>\n          <main>{error}</main>\n        </>\n      )}\n    </article>\n  );\n}\n\nfunction PokemonDetailsHeader({\n  unselect,\n  children,\n}: PropsWithChildren<PokemonUnselect>) {\n  return (\n    <header>\n      <button onClick={unselect}>\n        <i className=\"gg-chevron-left\"></i>\n      </button>\n      <h1>{children}</h1>\n    </header>\n  );\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\n\nimport { useVirtual } from \"react-virtual\";\n\nimport { ResponseReference } from \"../models/PokeAPI\";\nimport Pokemon, { getPokemonName } from \"../models/Pokemon\";\n\nimport {\n  getUnknownPokemon as getMisteryPokemonSprite,\n  noop,\n  useInfinitePokemonQuery,\n  usePokemonQuery,\n} from \"../models/utilities\";\n\ninterface PokemonEntryProps {\n  pokemon: ResponseReference;\n}\n\nfunction PokemonMistryImage({ pokemon }: { pokemon: Pokemon | null }) {\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(false);\n\n  const onLoad = useCallback(() => {\n    setLoaded(true);\n  }, []);\n\n  const onError = useCallback(() => {\n    setLoaded(true);\n    setError(true);\n  }, []);\n\n  return (\n    <>\n      {pokemon ? (\n        <img\n          hidden={!loaded}\n          className=\"unknown-pokemon-image\"\n          src={getMisteryPokemonSprite(pokemon, error)}\n          onLoad={onLoad}\n          onError={onError}\n          alt=\"\"\n        />\n      ) : null}\n      {loaded ? null : (\n        <div className=\"unknown-pokemon-image\">\n          <div className=\"gg-spinner\" />\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction PokemonEntry({ pokemon: reference }: PokemonEntryProps) {\n  const [pokemon] = usePokemonQuery(reference.url);\n\n  return (\n    <>\n      <PokemonMistryImage pokemon={pokemon} />\n      <div className=\"pokemon-name\">\n        {pokemon ? pokemon.name : getPokemonName(reference.name)}\n      </div>\n      <div className=\"pokemon-id\">\n        #{pokemon ? pokemon.id : getPokemonIdFromURL(reference)}\n      </div>\n    </>\n  );\n}\n\nfunction getPokemonIdFromURL(reference: ResponseReference) {\n  const url = reference.url;\n  return url.slice(url.lastIndexOf(\"/\", url.length - 2) + 1, -1);\n}\n\nexport interface PokemonNavigationProps {\n  selected: ResponseReference | null;\n  setSelected(selected: ResponseReference | null): void;\n}\n\nexport default function PokemonNavigation({\n  selected,\n  setSelected,\n}: PokemonNavigationProps) {\n  const [data, done, fetch, loading] = useInfinitePokemonQuery();\n\n  const parentRef = useRef<HTMLDivElement>(null!);\n\n  const { virtualItems, totalSize } = useVirtual({\n    parentRef: parentRef,\n    size: done ? data.length : data.length + 1,\n    estimateSize: useCallback(() => 100, []),\n  });\n\n  useEffect(() => {\n    const last = virtualItems[virtualItems.length - 1];\n\n    if (!last) return;\n\n    const canFetchNextPage = !done && !loading;\n\n    const isLastPokemonOnScreen = last.index >= data.length - 1;\n\n    if (canFetchNextPage && isLastPokemonOnScreen) {\n      fetch();\n    }\n  }, [data.length, virtualItems, loading, done, fetch]);\n\n  return (\n    <nav ref={parentRef} className=\"pokemon-navigation\">\n      <ul style={{ height: totalSize }}>\n        {virtualItems.map(row => {\n          const isOverflow = row.index > data.length - 1;\n          const isLoadingRow = isOverflow && !done;\n\n          const pokemon = data[row.index];\n\n          return (\n            <li\n              className={\n                isLoadingRow\n                  ? \"loading\"\n                  : selected &&\n                    (selected === pokemon ||\n                      selected.name === pokemon.name)\n                  ? \"active\"\n                  : \"\"\n              }\n              tabIndex={row.index + 1}\n              key={row.index}\n              ref={row.measureRef}\n              style={{ transform: `translateY(${row.start}px)` }}\n              onClick={isOverflow ? noop : () => setSelected(pokemon)}\n            >\n              {isLoadingRow ? (\n                <div className=\"unknown-pokemon-image\">\n                  <div className=\"gg-spinner\" />\n                </div>\n              ) : isOverflow ? null : (\n                <PokemonEntry pokemon={pokemon} />\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </nav>\n  );\n}\n","import { useCallback, useState } from \"react\";\n\nimport PokemonDetails from \"./components/PokemonDetails\";\nimport PokemonNavigation from \"./components/PokemonNavigation\";\n\nimport { ResponseReference } from \"./models/PokeAPI\";\n\nexport default function App() {\n  const [selected, setSelected] = useState<ResponseReference | null>(null);\n\n  const unselect = useCallback(() => setSelected(null), []);\n\n  return (\n    <>\n      <AppHeader />\n      <PokemonNavigation selected={selected} setSelected={setSelected} />\n      <PokemonDetails selected={selected} unselect={unselect} />\n      <AppFooter />\n    </>\n  );\n}\n\nfunction AppHeader() {\n  return (\n    <header>\n      <h1>Pokedex</h1>\n    </header>\n  );\n}\n\nfunction AppFooter() {\n  return (\n    <footer>\n      <p>All right rights reserved to their respective owners.</p>\n      <p>\n        {\"Website made using \"}\n        <a\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href=\"https://pokeapi.co/docs/v2\"\n        >\n          PokeAPI\n        </a>\n        {\" backend. Source available on \"}\n        <a\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href=\"https://github.com/blfunex/pokemons/\"\n        >\n          GitHub\n        </a>\n        .\n      </p>\n      <p>Pokemons are a &copy; intellectual property of Nintendo.</p>\n    </footer>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { QueryClient, QueryClientProvider } from \"react-query\";\n\nimport \"./root.css\";\n\nimport App from \"./App\";\n\nconst client = new QueryClient();\n\nReactDOM.render(\n  <React.StrictMode>\n    <QueryClientProvider client={client}>\n      <App />\n    </QueryClientProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n/* eslint-disable no-restricted-globals */\n// Just for my website, it does not reroute to https.\nif (\n  location.protocol !== \"https:\" &&\n  !location.host.startsWith(\"localhost\")\n) {\n  location.href = location.href.replace(\"http://\", \"https://\");\n}\n"],"sourceRoot":""}